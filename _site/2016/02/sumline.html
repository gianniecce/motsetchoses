<!DOCTYPE html>
<html>

  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width initial-scale=1" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <title>Add Sum to Dataset</title>
    <meta name="description" content="Write an awesome description for your new site here. You can edit this line in _config.yml. It will appear in your document head meta (for Google search results) and in your feed.xml site description.
">

    <link rel="stylesheet" href="/motsetchoses/css/main.css">
    <link rel="canonical" href="http://giacomovagni.github.io/motsetchoses/2016/02/sumline.html">
    <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
</head>


  <body>

    <!--- Header and nav template site-wide -->
<header>
  <nav class="group">
    <a href="/motsetchoses\"><img class="badge" src="/motsetchoses/badge.png" alt="CH"></a>
    
      
        <a class="page-link" href="/motsetchoses/about/">About</a>
        
      
    
      
    
      
        <a class="page-link" href="/motsetchoses/Tags/index.html">Tags</a>
        
      
    
      
        <a class="page-link" href="/motsetchoses/TimeUse/index.html">time use</a>
        
      
    
      
    
      
        <a class="page-link" href="/motsetchoses/page/">page</a>
        
      
    
  </nav>
  
</header>

 

    <div class="page-content">
      <div class="wrapper">
        <div class="post">

  <header class="post-header">
    <h1 class="post-title">Add Sum to Dataset</h1>
    <p class="post-meta">Feb 16, 2016</p>
  </header>

 <hr width = 10%>

  <article class="post-content">
    <p>hey</p>

<div class="highlight"><pre><code class="language-r" data-lang="r"><span class="kn">library</span><span class="p">(</span>plyr<span class="p">)</span>
<span class="kn">library</span><span class="p">(</span>dplyr<span class="p">)</span>
<span class="kn">library</span><span class="p">(</span>tidyr<span class="p">)</span>
<span class="kn">library</span><span class="p">(</span>mtusRlocal<span class="p">)</span>
<span class="kn">library</span><span class="p">(</span>knitr<span class="p">)</span>
<span class="kn">library</span><span class="p">(</span>reshape2<span class="p">)</span>
<span class="kn">library</span><span class="p">(</span>xtable<span class="p">)</span>

<span class="kp">load</span><span class="p">(</span><span class="s">&#39;/Users/giacomovagni/site/motsetchoses/_data/dtaSimple.RData&#39;</span><span class="p">)</span></code></pre></div>

<p>The code is :</p>

<div class="highlight"><pre><code class="language-r" data-lang="r">dt <span class="o">=</span> dtaSimple <span class="o">%&gt;%</span> group_by<span class="p">(</span>sex<span class="p">)</span> <span class="o">%&gt;%</span> 
  select<span class="p">(</span>matches<span class="p">(</span><span class="s">&#39;av&#39;</span><span class="p">))</span> <span class="o">%&gt;%</span> summarise_each<span class="p">(</span>funs<span class="p">(</span><span class="kp">mean</span><span class="p">))</span> <span class="o">%&gt;%</span> 
  melt<span class="p">(</span>id.vars <span class="o">=</span> <span class="s">&#39;sex&#39;</span><span class="p">)</span> <span class="o">%&gt;%</span> spread<span class="p">(</span>sex<span class="p">,</span> value<span class="p">)</span> 

<span class="kp">colnames</span><span class="p">(</span>dt<span class="p">)</span> <span class="o">=</span> <span class="kt">c</span><span class="p">(</span><span class="s">&quot;variable&quot;</span><span class="p">,</span> <span class="s">&quot;men&quot;</span><span class="p">,</span> <span class="s">&quot;women&quot;</span><span class="p">)</span> 

dt <span class="o">%&gt;%</span> summarise<span class="p">(</span>variable <span class="o">=</span> <span class="s">&quot;Sum&quot;</span><span class="p">,</span> men <span class="o">=</span> <span class="m">1444</span><span class="p">,</span> women <span class="o">=</span> <span class="m">1440</span><span class="p">)</span> <span class="o">%&gt;%</span> 
  <span class="kp">merge</span><span class="p">(</span>dt<span class="p">,</span> <span class="m">.</span><span class="p">,</span> all <span class="o">=</span> <span class="bp">T</span><span class="p">)</span></code></pre></div>

<div class="highlight"><pre><code class="language-text" data-lang="text">##    variable          men        women
## 1     swave    0.0000000    0.0000000
## 2       av1  238.7662338  198.3116883
## 3       av2   16.4285714    3.0519481
## 4       av3    0.0000000    0.1948052
## 5       av4    0.0000000    2.0129870
## 6       av5   36.0389610   25.1948052
## 7       av6   25.5844156   58.8961039
## 8       av7   26.4935065   65.9740260
## 9       av8   33.4415584   11.2337662
## 10      av9   18.5714286    7.8571429
## 11     av10   28.9610390   38.3766234
## 12     av11   33.4415584   67.5974026
## 13     av12   26.4285714   34.2857143
## 14     av13   35.7792208   45.1948052
## 15     av14    0.8441558    2.2727273
## 16     av15   54.4805195   53.8961039
## 17     av16  494.3506494  514.3506494
## 18     av17   35.1298701   32.7922078
## 19     av18    4.2207792    4.8051948
## 20     av19   18.4415584    6.1038961
## 21     av20    3.2467532    2.4025974
## 22     av21    7.9220779    9.4805195
## 23     av22    4.4155844    3.5714286
## 24     av23    1.0389610    4.6753247
## 25     av24    1.8831169    2.4025974
## 26     av25   18.0519481   15.5194805
## 27     av26   -9.0000000   -9.0000000
## 28     av27   -9.0000000   -9.0000000
## 29     av28   23.6363636   24.1558442
## 30     av29   18.1168831   26.8831169
## 31     av30    4.7402597    0.4545455
## 32     av31  131.8831169   97.9870130
## 33     av32    2.3376623    0.9740260
## 34     av33   14.0259740    5.0000000
## 35     av34    6.0389610    7.8571429
## 36     av35   10.9740260    8.4415584
## 37     av36   14.3506494   16.6233766
## 38     av37   12.7272727   15.1298701
## 39     av38    6.6883117    6.8181818
## 40     av39    0.0000000    3.6363636
## 41     av40   10.0649351    5.7792208
## 42     av41   20.4545455    9.8051948
## 43      Sum 1444.0000000 1440.0000000</code></pre></div>


  </article>

</div>

      </div>
    </div>

    <footer>
  <ul class="footer-links group">
    <li><a href="mailto:hate@spam.net"><span class="icon-mail"></span></a></li>
    
      <li>
        <a href="//www.twitter.com/jekyllrb"><span class="icon-twitter"></span></a>
      </li>
    
      <li>
        <a href="//plus.google.com/explore/jekyllrb"><span class="icon-googleplus"></span></a>
      </li>
    
      <li>
        <a href="//github.com/jekyll"><span class="icon-github"></span></a>
      </li>
    
      <li>
        <a href="//www.flickr.com/explore"><span class="icon-flickr"></span></a>
      </li>
    
      <li>
        <a href="/feed.xml"><span class="icon-feed"></span></a>
      </li>
    
  </ul>
<div class="credits">
<span>&copy; GIACOMO VAGNI &nbsp; 2016</span>
<br>
<span>This site was created with <a href="//github.com/cpsievert/knitr-jekyll">cpsievert/knitr-jekyll</a> -- a marriage of <a href="//github.com/yihui/knitr-jekyll">yihui/knitr-jekyll</a> and the <a href="//github.com/clayh53/tufte-jekyll">Tufte theme</a> for <a href="//jekyllrb.com">Jekyll</a>.</span>
</div>
</footer>


  </body>

</html>
